{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamscott/Desktop/cursor_test/frontend/src/components/TerminalClient.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport { Terminal as XTerm } from 'xterm';\nimport { FitAddon } from 'xterm-addon-fit';\nimport { WebLinksAddon } from 'xterm-addon-web-links';\nimport 'xterm/css/xterm.css';\n\ninterface TerminalProps {\n  output: string;\n  onCommand: (command: string) => void;\n}\n\nexport default function TerminalClient({ output, onCommand }: TerminalProps) {\n  const terminalRef = useRef<HTMLDivElement>(null);\n  const xtermRef = useRef<XTerm | null>(null);\n  const fitAddonRef = useRef<FitAddon | null>(null);\n  const [currentLine, setCurrentLine] = useState('');\n  const [commandHistory, setCommandHistory] = useState<string[]>([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [isOutputting, setIsOutputting] = useState(false);\n\n  // Initialize terminal\n  useEffect(() => {\n    if (!terminalRef.current) return;\n\n    const xterm = new XTerm({\n      cursorBlink: true,\n      fontSize: 14,\n      fontFamily: 'Menlo, Monaco, \"Courier New\", monospace',\n      theme: {\n        background: '#1a1a1a',\n        foreground: '#ffffff',\n      },\n      allowTransparency: true,\n    });\n\n    const fitAddon = new FitAddon();\n    xterm.loadAddon(fitAddon);\n    xterm.loadAddon(new WebLinksAddon());\n\n    xterm.open(terminalRef.current);\n    fitAddon.fit();\n\n    // Write initial prompt\n    xterm.write('$ ');\n\n    // Handle input\n    xterm.onData((data) => {\n      const code = data.charCodeAt(0);\n      \n      // Handle special keys\n      if (code === 13) { // Enter\n        if (currentLine.trim()) {\n          onCommand(currentLine);\n          setCommandHistory(prev => [...prev, currentLine]);\n          setHistoryIndex(-1);\n          setCurrentLine('');\n          xterm.write('\\r\\n$ ');\n        } else {\n          xterm.write('\\r\\n$ ');\n        }\n      } else if (code === 8) { // Backspace\n        if (currentLine.length > 0) {\n          setCurrentLine(prev => prev.slice(0, -1));\n          xterm.write('\\b \\b');\n        }\n      } else if (code === 27) { // Escape sequences\n        const sequence = data.slice(1);\n        if (sequence === '[A') { // Up arrow\n          if (historyIndex < commandHistory.length - 1) {\n            const newIndex = historyIndex + 1;\n            setHistoryIndex(newIndex);\n            const command = commandHistory[commandHistory.length - 1 - newIndex];\n            setCurrentLine(command);\n            xterm.write('\\r$ ' + command);\n          }\n        } else if (sequence === '[B') { // Down arrow\n          if (historyIndex > 0) {\n            const newIndex = historyIndex - 1;\n            setHistoryIndex(newIndex);\n            const command = commandHistory[commandHistory.length - 1 - newIndex];\n            setCurrentLine(command);\n            xterm.write('\\r$ ' + command);\n          } else {\n            setHistoryIndex(-1);\n            setCurrentLine('');\n            xterm.write('\\r$ ');\n          }\n        }\n      } else if (code >= 32) { // Printable characters\n        setCurrentLine(prev => prev + data);\n        xterm.write(data);\n      }\n    });\n\n    xtermRef.current = xterm;\n    fitAddonRef.current = fitAddon;\n\n    const handleResize = () => {\n      fitAddon.fit();\n    };\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      xterm.dispose();\n    };\n  }, []); // Empty dependency array for initialization\n\n  // Handle output updates\n  useEffect(() => {\n    if (xtermRef.current && output && !isOutputting) {\n      setIsOutputting(true);\n      xtermRef.current.write(output);\n      xtermRef.current.write('\\r\\n$ ');\n      setIsOutputting(false);\n    }\n  }, [output, isOutputting]);\n\n  return (\n    <div\n      ref={terminalRef}\n      className=\"h-full w-full bg-gray-900 rounded-lg overflow-hidden\"\n    />\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}