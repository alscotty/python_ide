{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/adamscott/Desktop/cursor_test/frontend/src/components/TerminalClient.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport { Terminal as XTerm } from 'xterm';\nimport { FitAddon } from 'xterm-addon-fit';\nimport { WebLinksAddon } from 'xterm-addon-web-links';\nimport 'xterm/css/xterm.css';\n\ninterface TerminalProps {\n  output: string;\n  onCommand: (command: string) => void;\n}\n\nexport default function TerminalClient({ output, onCommand }: TerminalProps) {\n  const terminalRef = useRef<HTMLDivElement>(null);\n  const xtermRef = useRef<XTerm | null>(null);\n  const fitAddonRef = useRef<FitAddon | null>(null);\n  const [currentLine, setCurrentLine] = useState('');\n  const [commandHistory, setCommandHistory] = useState<string[]>([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [isOutputting, setIsOutputting] = useState(false);\n\n  // Initialize terminal\n  useEffect(() => {\n    if (!terminalRef.current) return;\n\n    const xterm = new XTerm({\n      cursorBlink: true,\n      fontSize: 14,\n      fontFamily: 'Menlo, Monaco, \"Courier New\", monospace',\n      theme: {\n        background: '#1a1a1a',\n        foreground: '#ffffff',\n      },\n      allowTransparency: true,\n    });\n\n    const fitAddon = new FitAddon();\n    xterm.loadAddon(fitAddon);\n    xterm.loadAddon(new WebLinksAddon());\n\n    xterm.open(terminalRef.current);\n    fitAddon.fit();\n\n    // Write initial prompt\n    xterm.write('$ ');\n\n    // Handle input\n    xterm.onData((data) => {\n      const code = data.charCodeAt(0);\n      \n      // Handle special keys\n      if (code === 13) { // Enter\n        if (currentLine.trim()) {\n          onCommand(currentLine);\n          setCommandHistory(prev => [...prev, currentLine]);\n          setHistoryIndex(-1);\n          setCurrentLine('');\n          xterm.write('\\r\\n$ ');\n        } else {\n          xterm.write('\\r\\n$ ');\n        }\n      } else if (code === 8) { // Backspace\n        if (currentLine.length > 0) {\n          setCurrentLine(prev => prev.slice(0, -1));\n          xterm.write('\\b \\b');\n        }\n      } else if (code === 27) { // Escape sequences\n        const sequence = data.slice(1);\n        if (sequence === '[A') { // Up arrow\n          if (historyIndex < commandHistory.length - 1) {\n            const newIndex = historyIndex + 1;\n            setHistoryIndex(newIndex);\n            const command = commandHistory[commandHistory.length - 1 - newIndex];\n            setCurrentLine(command);\n            xterm.write('\\r$ ' + command);\n          }\n        } else if (sequence === '[B') { // Down arrow\n          if (historyIndex > 0) {\n            const newIndex = historyIndex - 1;\n            setHistoryIndex(newIndex);\n            const command = commandHistory[commandHistory.length - 1 - newIndex];\n            setCurrentLine(command);\n            xterm.write('\\r$ ' + command);\n          } else {\n            setHistoryIndex(-1);\n            setCurrentLine('');\n            xterm.write('\\r$ ');\n          }\n        }\n      } else if (code >= 32) { // Printable characters\n        setCurrentLine(prev => prev + data);\n        xterm.write(data);\n      }\n    });\n\n    xtermRef.current = xterm;\n    fitAddonRef.current = fitAddon;\n\n    const handleResize = () => {\n      fitAddon.fit();\n    };\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      xterm.dispose();\n    };\n  }, []); // Empty dependency array for initialization\n\n  // Handle output updates\n  useEffect(() => {\n    if (xtermRef.current && output && !isOutputting) {\n      setIsOutputting(true);\n      xtermRef.current.write(output);\n      xtermRef.current.write('\\r\\n$ ');\n      setIsOutputting(false);\n    }\n  }, [output, isOutputting]);\n\n  return (\n    <div\n      ref={terminalRef}\n      className=\"h-full w-full bg-gray-900 rounded-lg overflow-hidden\"\n    />\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}